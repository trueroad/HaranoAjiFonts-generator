% -*- coding: utf-8 mode:latex -*-

% 原ノ味フォント 20210102/20210130 プロポーショナルかな 縦組みテスト

\documentclass[tate,paper={297mm,210mm}]{jlreq}

\usepackage{luatexja-otf}

\title{原ノ味フォント20210102/20210130 \\ プロポーショナルかな縦組みテスト}

\author{細田 真道}

\tfont\hmrnone=HaranoAjiMincho-Regular:jfm=propv;+vert
\tfont\hmrvpal=HaranoAjiMincho-Regular:jfm=propv;+vert;+vkna;+vpal
\tfont\hmrpwidvert=HaranoAjiMincho-Regular:jfm=propv;+pwid;+vert

\tfont\hgrnone=HaranoAjiGothic-Regular:jfm=propv;+vert
\tfont\hgrvpal=HaranoAjiGothic-Regular:jfm=propv;+vert;+vkna;+vpal
\tfont\hgrpwidvert=HaranoAjiGothic-Regular:jfm=propv;+pwid;+vert

\tfont\sernone=SourceHanSerif-Regular:jfm=propv;+vert
\tfont\servpal=SourceHanSerif-Regular:jfm=propv;+vert;+vpal
\tfont\serpwidvert=SourceHanSerif-Regular:jfm=propv;+pwid;+vert

\tfont\sarnone=SourceHanSans-Regular:jfm=propv;+vert
\tfont\sarvpal=SourceHanSans-Regular:jfm=propv;+vert;+vpal
\tfont\sarpwidvert=SourceHanSans-Regular:jfm=propv;+pwid;+vert

\begin{document}

\maketitle

\section*{概要}

LuaTeX-ja 20210103.0は+vpalがうまく扱えない（チケット\#41106）ようで、
原ノ味と源ノともに+vpalの動作がおかしい。
どちらもグリフの位置は変更されているが、高さが低くならなかった。
（それとは別に原ノ味20210102は、かなのvpalに問題があったが、
  原ノ味20210130 でvknaと併用することでvpalが使えるようになっている。）

原ノ味20210102以降のプロポーショナルかな縦組みは、
+pwid適用後に+vertを適用することでグリフが得られる
（Adobe-Japan1のサイトで配布されているGSUBと同じ）ようになっている。
これにより高さが全角より低く詰まってプロポーショナルになった。

さらに、原ノ味で \textbackslash CIDによるCID直接指定で
プロポーショナルかな縦組み用グリフを指定してみたところ、
+pwid, +vert適用と同様に、高さが全角より低く詰まってプロポーショナルになった。

源ノは+pwidが無く、+vertのみが適用されるため、
+pwid, +vertは全角のままでプロポーショナルにはならなかった。
AJ1フォントではないため、CID直接指定はできない。

\clearpage

\section*{原ノ味明朝Regular}

\hmrnone\hbox{\tate\vrule ちょっと\vrule +vert}

\hmrvpal\hbox{\tate\vrule ちょっと\vrule +vert;+vkna;+vpal}

\hmrpwidvert\hbox{\tate\vrule ちょっと\vrule +pwid;+vert}

\hmrnone\hbox{\tate\vrule%
  \CID{16017}%
  \CID{16055}%
  \CID{16019}%
  \CID{16024}\vrule direct}

\section*{原ノ味角ゴシックRegular}

\hgrnone\hbox{\tate\vrule ちょっと\vrule +vert}

\hgrvpal\hbox{\tate\vrule ちょっと\vrule +vert;+vkna;+vpal}

\hgrpwidvert\hbox{\tate\vrule ちょっと\vrule +pwid;+vert}

\hgrnone\hbox{\tate\vrule%
  \CID{16017}%
  \CID{16055}%
  \CID{16019}%
  \CID{16024}\vrule direct}

\section*{源ノ明朝Regular}

\sernone\hbox{\tate\vrule ちょっと\vrule +vert}

\servpal\hbox{\tate\vrule ちょっと\vrule +vert;+vpal}

\serpwidvert\hbox{\tate\vrule ちょっと\vrule +pwid;+vert}

\section*{源ノ角ゴシックRegular}

\sarnone\hbox{\tate\vrule ちょっと\vrule +vert}

\sarvpal\hbox{\tate\vrule ちょっと\vrule +vert;+vpal}

\sarpwidvert\hbox{\tate\vrule ちょっと\vrule +pwid;+vert}

\end{document}
